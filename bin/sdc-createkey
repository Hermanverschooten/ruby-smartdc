#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
require 'cli_helper'

key = {}
name = ARGV[0]
if name
  key[:name] = name
else
  puts 'name is empty.'
  exit 1
end

key_file = ARGV[1]
if key_file
  begin
    key[:key] = File.read(key_file)
  rescue => e
    puts e
    exit 1
  end
else
  puts 'key file is empty.'
  exit 1
end

begin
  puts client.keys.create key
rescue => e
  puts e.inspect
end