#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
require 'cli_helper'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: #{File.basename($0)} instrumentation.id [options]"
  opts.on('-v', '--value', 'value raw') { options[:value] = true }
  opts.on_tail('-h','--help') do
    puts opts
    exit
  end

  begin
    opts.parse!(ARGV)
  rescue => e
    puts e.to_s << "\n" << opts.to_s
    exit
  end
end

begin
  if options[:value]
    puts client.analytics.instrumentations(ARGV[0]).value
  else
    puts client.analytics.instrumentations(ARGV[0]).read
  end
rescue => e
  puts e.inspect
end